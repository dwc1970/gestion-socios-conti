<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Admin - Club Constitución</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --negro: #000000; --oro: #ffd700; --gris: #f4f4f4; --verde: #2ecc71; --rojo: #ff4d4d; }
        body { margin: 0; font-family: sans-serif; background: var(--gris); }
        header { background: var(--negro); color: var(--oro); padding: 15px; text-align: center; border-bottom: 5px solid var(--oro); }
        .stats-container { display: flex; justify-content: space-around; padding: 20px; }
        .stat-card { background: var(--negro); color: var(--oro); padding: 20px; border-radius: 10px; width: 40%; text-align: center; border: 2px solid var(--oro); }
        .tabla-container { padding: 20px; overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; background: white; }
        th { background: var(--negro); color: var(--oro); padding: 12px; }
        td { padding: 10px; border-bottom: 1px solid #ddd; text-align: center; }
        .status-badge { padding: 5px 10px; border-radius: 15px; color: white; font-size: 0.8rem; }
        .badge-al-dia { background: var(--verde); }
        .badge-debe { background: var(--rojo); }
        .btn-borrar { background: var(--rojo); color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; }
    </style>
</head>
<body>
    <header><h1>ADMINISTRACIÓN CONSTITUCIÓN</h1></header>
    <div class="stats-container">
        <div class="stat-card"><h3>TOTAL SOCIOS</h3><h2 id="totalSocios">0</h2></div>
    </div>
    <div class="tabla-container">
        <table>
            <thead><tr><th>Nº</th><th>Nombre</th><th>DNI</th><th>Cat.</th><th>Estado</th><th>Acciones</th></tr></thead>
            <tbody id="tablaSocios"></tbody>
        </table>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="firebase-config.js"></script>
    <script>
        async function cargarSocios() {
            const table = document.getElementById('tablaSocios');
            table.innerHTML = "";
            const snap = await db.collection("socios").get();
            let cant = 0;
            snap.forEach(doc => {
                const s = doc.data(); cant++;
                table.innerHTML += `
                    <tr>
                        <td>${s.nroSocio}</td><td>${s.nombre}</td><td>${s.dni}</td><td>${s.categoria}</td>
                        <td><span class="status-badge ${s.estadoCuota === 'Al día' ? 'badge-al-dia' : 'badge-debe'}">${s.estadoCuota}</span></td>
                        <td><button class="btn-borrar" onclick="eliminar('${s.dni}')"><i class="fas fa-trash"></i></button></td>
                    </tr>`;
            });
            document.getElementById('totalSocios').innerText = cant;
        }
        async function eliminar(dni) {
            if(confirm("¿Eliminar?")) { await db.collection("socios").doc(dni).delete(); cargarSocios(); }
        }
        window.onload = cargarSocios;
    </script>
</body>
</html>